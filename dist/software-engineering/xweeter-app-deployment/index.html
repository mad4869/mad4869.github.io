<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="MAkbarD's blog"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.9.2"><meta name="og:image" content="/img/blog/logo.svg"><title>Xweeter App Deployment | MAD4869</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><link rel="stylesheet" href="/_astro/index.CtxG5iuT.css"><script type="module" src="/_astro/hoisted.DZL4CV8D.js"></script></head> <body> <header class="w-screen px-px"> <nav class="flex items-center justify-between w-full px-16 py-4 border shadow-lg text-fuchsia-800 border-fuchsia-800 rounded-b-3xl shadow-fuchsia-200/20"> <a href="/" class="text-3xl font-bold" title="Home"> <img src="/_astro/logo.DoQbXR2Z_Z1GL1ve.svg" alt="Logo Blog" loading="lazy" class="drop-shadow-[0_0_10px_rgba(232,121,249,0.5)]" width="50" height="16" decoding="async"> </a> <ul class="flex items-center justify-center gap-8"> <li title="Self-introduction"> <a href="/about" class="pb-1 transition-colors border-fuchsia-400 hover:text-fuchsia-400">
About
</a> </li> <li title="Software engineering portfolio"> <a href="/software-engineering" class="pb-1 transition-colors border-fuchsia-400 hover:text-fuchsia-400">
Software Engineering
</a> </li> <li title="Writing portfolio"> <a href="/writing" class="pb-1 transition-colors border-fuchsia-400 hover:text-fuchsia-400">
Writing
</a> </li> <li title="Some random rambling about anything"> <a href="/notes" class="pb-1 transition-colors border-fuchsia-400 hover:text-fuchsia-400">
Notes
</a> </li> </ul> <ul class="flex items-center justify-center gap-4"> <li class="transition-all hover:text-fuchsia-400 hover:scale-110" title="Go to Twitter"> <a href="https://twitter.com/MAD4869" target="_blank"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </li> <li class="transition-all hover:text-fuchsia-400 hover:scale-110" title="Go to Github"> <a href="https://github.com/mad4869" target="_blank"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 480 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> </li> <li class="transition-all hover:text-fuchsia-400 hover:scale-110" title="Go to Wattpad"> <a href="https://www.wattpad.com/user/aconitin_4869" target="_blank"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M13.034 3.09c-1.695.113-3.9 2.027-6.9 6.947.245-2.758.345-4.716-.857-5.743-.823-.702-2.764-.974-3.926.536C.18 6.349-.09 9.312.024 12.432c.238 6.518 2.544 8.487 4.59 8.487h.001c3.623 0 4.13-4.439 6.604-8.4-.09 1.416-.008 2.668.266 3.532 1.078 3.398 4.784 3.663 6.467.21 2.374-4.87 3.058-6.016 5.453-9.521 1.58-2.314-.252-3.812-2.374-2.735-1.09.554-2.86 1.935-5.065 4.867.387-2.23.28-5.996-2.932-5.782z"></path></svg> </a> </li> <li class="transition-transform hover:scale-110" title="Go to KaryaKarsa"> <a href="https://karyakarsa.com/aconitin/" target="_blank"> <img src="/_astro/logo-kk.qwGrKF09_Z1sqeHs.svg" alt="Logo KaryaKarsa" loading="lazy" width="10" height="10" decoding="async"> </a> </li> <li class="transition-transform hover:scale-110" title="Go to Kwikku"> <a href="https://www.kwikku.com/mad4869" target="_blank"> <img src="/_astro/logo-kwik.CgTZu3Cm_Z9Bwy4.svg" alt="Logo Kwikku" loading="lazy" width="15" height="15" decoding="async"> </a> </li> </ul> </nav> </header>  <main class="min-h-[calc(100dvh-8rem)] text-fuchsia-400 py-8 px-16 space-y-4"> <section class="flex items-center justify-between"> <div> <h1 class="text-3xl font-bold">Xweeter App Deployment</h1> <h6 class="">A dev-ops process of a simple social media app.</h6> </div> <div> <p class="text-xs text-fuchsia-400/50">Nginx</p><p class="text-xs text-fuchsia-400/50">Docker</p><p class="text-xs text-fuchsia-400/50">Github Actions</p><p class="text-xs text-fuchsia-400/50">Dev Ops</p> </div> </section> <img src="/_astro/overtime-system.lGE-G_8n_Z1BYCEV.webp" alt="Hero Image of Xweeter App Deployment" class="max-w-full mx-auto transition-shadow shadow-lg rounded-xl shadow-fuchsia-200/20 hover:shadow-fuchsia-200/40" loading="lazy" width="1918" height="954" decoding="async"> <article class="prose prose-img:rounded-xl text-fuchsia-200 prose-headings:text-fuchsia-400 dark:prose-invert prose-a:text-fuchsia-200 hover:prose-a:text-fuchsia-800"> <h2 id="requirements">Requirements</h2>
<p>There are five steps to deploy the app to the server and make it accessible on the web.</p>
<ol>
<li>Preparing the server</li>
<li>Dockerizing the app</li>
<li>Creating a CI/CD pipeline</li>
<li>Configuring the web server using Nginx</li>
<li>Creating a domain name</li>
</ol>
<h2 id="steps-explanation">Steps Explanation</h2>
<h3 id="1-preparing-the-server">1. Preparing the server</h3>
<p>In this project, I am using an Ubuntu virtual machine on an EC2 instance from Amazon Web Services. There are several steps involved in preparing the server.</p>
<h4 id="updating-the-server">Updating the server</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> update</span><span style="color:#E1E4E8"> &#x26;&#x26; </span><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> upgrade</span></span>
<span class="line"></span></code></pre>
<h4 id="installing-docker">Installing Docker</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Add Docker's official GPG key:</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> update</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> ca-certificates</span><span style="color:#9ECBFF"> curl</span><span style="color:#9ECBFF"> gnupg</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> install</span><span style="color:#79B8FF"> -m</span><span style="color:#79B8FF"> 0755</span><span style="color:#79B8FF"> -d</span><span style="color:#9ECBFF"> /etc/apt/keyrings</span></span>
<span class="line"><span style="color:#B392F0">curl</span><span style="color:#79B8FF"> -fsSL</span><span style="color:#9ECBFF"> https://download.docker.com/linux/ubuntu/gpg</span><span style="color:#F97583"> |</span><span style="color:#B392F0"> sudo</span><span style="color:#9ECBFF"> gpg</span><span style="color:#79B8FF"> --dearmor</span><span style="color:#79B8FF"> -o</span><span style="color:#9ECBFF"> /etc/apt/keyrings/docker.gpg</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> chmod</span><span style="color:#9ECBFF"> a+r</span><span style="color:#9ECBFF"> /etc/apt/keyrings/docker.gpg</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Add the repository to Apt sources:</span></span>
<span class="line"><span style="color:#79B8FF">echo</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  "deb [arch=$(</span><span style="color:#B392F0">dpkg</span><span style="color:#79B8FF"> --print-architecture</span><span style="color:#9ECBFF">) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#9ECBFF">  $(</span><span style="color:#79B8FF">.</span><span style="color:#9ECBFF"> /etc/os-release &#x26;&#x26; </span><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "</span><span style="color:#E1E4E8">$VERSION_CODENAME</span><span style="color:#9ECBFF">") stable"</span><span style="color:#F97583"> |</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#B392F0">  sudo</span><span style="color:#9ECBFF"> tee</span><span style="color:#9ECBFF"> /etc/apt/sources.list.d/docker.list</span><span style="color:#F97583"> ></span><span style="color:#9ECBFF"> /dev/null</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> update</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Install the Docker packages:</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt-get</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> docker-ce</span><span style="color:#9ECBFF"> docker-ce-cli</span><span style="color:#9ECBFF"> containerd.io</span><span style="color:#9ECBFF"> docker-buildx-plugin</span><span style="color:#9ECBFF"> docker-compose-plugin</span></span>
<span class="line"></span></code></pre>
<!-- Source: [Docker documentation](https://docs.docker.com/engine/install/ubuntu/) -->
<h4 id="installing-nginx">Installing Nginx</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> nginx</span></span>
<span class="line"></span></code></pre>
<h4 id="configuring-the-firewall">Configuring the Firewall</h4>
<p>After installing Nginx, it’s essential to configure the firewall to allow traffic on both port 80 (HTTP) and port 443 (HTTPS). To accomplish this, we need to execute the following command to allow <code>Nginx Full</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> ufw</span><span style="color:#9ECBFF"> allow</span><span style="color:#9ECBFF"> 'Nginx Full'</span></span>
<span class="line"></span></code></pre>
<h3 id="2-dockerizing-the-app">2. Dockerizing the app</h3>
<p>To run the app inside a Docker container, we need to create a <strong>Dockerfile</strong> for both Vue and Flask apps, as well as create a <strong>Docker Compose</strong> file.</p>
<h4 id="dockerfile-for-vue-app">Dockerfile for Vue app</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> node:18</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">LABEL</span><span style="color:#E1E4E8"> version=</span><span style="color:#9ECBFF">"1.0"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /xweeter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> . .</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm install</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> TZ=</span><span style="color:#9ECBFF">"Asia/Jakarta"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">EXPOSE</span><span style="color:#E1E4E8"> 4173</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"npm"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"run"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"preview"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span></code></pre>
<h4 id="dockerfile-for-flask-app">Dockerfile for Flask app</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> python:3.10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">LABEL</span><span style="color:#E1E4E8"> version=</span><span style="color:#9ECBFF">"1.0"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /xweeter-api</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> . .</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> pip install -r requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> FLASK_APP=</span><span style="color:#9ECBFF">"run.py"</span></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> FLASK_DEBUG=1</span></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> ENVIRONMENT=</span><span style="color:#9ECBFF">"development"</span></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> POSTGRES_USER=</span><span style="color:#9ECBFF">"postgres"</span></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> POSTGRES_PORT=</span><span style="color:#9ECBFF">"5432"</span></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> TZ=</span><span style="color:#9ECBFF">"Asia/Jakarta"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">EXPOSE</span><span style="color:#E1E4E8"> 5000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"flask"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"run"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"--host=0.0.0.0"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span></code></pre>
<h4 id="docker-compose">Docker Compose</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'3'</span></span>
<span class="line"><span style="color:#85E89D">services</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  xweeter</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">mad4869/xweeter:latest</span></span>
<span class="line"><span style="color:#85E89D">    container_name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">xweeter-container</span></span>
<span class="line"><span style="color:#85E89D">    restart</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">always</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">4173:4173</span></span>
<span class="line"><span style="color:#85E89D">    volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-volume:/app/data</span></span>
<span class="line"><span style="color:#85E89D">    command</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">npm run preview</span></span>
<span class="line"><span style="color:#85E89D">    depends_on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-api</span></span>
<span class="line"><span style="color:#85E89D">    networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-network</span></span>
<span class="line"><span style="color:#85E89D">  xweeter-api</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">mad4869/xweeter-api:latest</span></span>
<span class="line"><span style="color:#85E89D">    container_name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">xweeter-api-container</span></span>
<span class="line"><span style="color:#85E89D">    restart</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">always</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">5000:5000</span></span>
<span class="line"><span style="color:#85E89D">    volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-api-volume:/app/data</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_HOST=postgresql-container</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_DB=xweeter-db</span></span>
<span class="line"><span style="color:#85E89D">    depends_on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">postgres</span></span>
<span class="line"><span style="color:#85E89D">    networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-network</span></span>
<span class="line"><span style="color:#85E89D">  postgres</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">postgres:latest</span></span>
<span class="line"><span style="color:#85E89D">    container_name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">postgresql-container</span></span>
<span class="line"><span style="color:#85E89D">    restart</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">always</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">5433:5432</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_USER=postgres</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_DB=xweeter-db</span></span>
<span class="line"><span style="color:#85E89D">    networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">xweeter-network</span></span>
<span class="line"><span style="color:#85E89D">networks</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  xweeter-network</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    external</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#85E89D">volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  xweeter-volume</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    external</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#85E89D">  xweeter-api-volume</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    external</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"></span></code></pre>
<h3 id="3-creating-cicd-pipeline">3. Creating CI/CD pipeline</h3>
<p>In this project, I am using GitHub Actions to automate the CI/CD process.</p>
<h4 id="preparation">Preparation</h4>
<p>First, we need to protect the <code>main</code> branch of the repository. This ensures that the merging process will only be executed if a pull request from a collaborator has been approved.</p>
<!-- ![setting to protect main branch](docs/branch-protection.png) -->
<p>After that, we can proceed to build the CI/CD pipeline. Within the <code>.github/workflows</code> directory, we need to create a <strong>.yml</strong> file for both CI and CD processes.</p>
<h4 id="ciyml">CI.yml</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Continuous Integration</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#85E89D">    pull_request</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#85E89D">        branches</span><span style="color:#E1E4E8">: [ </span><span style="color:#9ECBFF">"main"</span><span style="color:#E1E4E8"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    build_testing</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Testing</span></span>
<span class="line"><span style="color:#85E89D">        runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#85E89D">        steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Checkout Repository</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Install Docker Compose</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                sudo apt-get update</span></span>
<span class="line"><span style="color:#9ECBFF">                sudo apt-get install -y docker-compose</span></span>
<span class="line"><span style="color:#9ECBFF">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Create Network and Volume</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker network create xweeter-network</span></span>
<span class="line"><span style="color:#9ECBFF">                docker volume create xweeter-api-volume</span></span>
<span class="line"><span style="color:#9ECBFF">                docker volume create xweeter-volume</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Run Container</span></span>
<span class="line"><span style="color:#85E89D">              env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                SECRET_KEY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.SECRET_KEY }}</span></span>
<span class="line"><span style="color:#85E89D">                POSTGRES_PASSWORD</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.POSTGRES_PASSWORD }}</span></span>
<span class="line"><span style="color:#85E89D">                MINIO_ACCESS_KEY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.MINIO_ACCESS_KEY }}</span></span>
<span class="line"><span style="color:#85E89D">                MINIO_SECRET_KEY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.MINIO_SECRET_KEY }}</span></span>
<span class="line"><span style="color:#85E89D">                JWT_SECRET_KEY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.JWT_SECRET_KEY }}</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                sudo docker-compose up -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Install Testing Requirements</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                pip install -r server/test/requirements.txt</span></span>
<span class="line"><span style="color:#9ECBFF">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Testing</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                sleep 5</span></span>
<span class="line"><span style="color:#9ECBFF">                pytest server/test/test.py</span></span>
<span class="line"></span></code></pre>
<p>In the CI process, the operations run inside an Ubuntu runner provided by the GitHub. For the testing phase, <strong>Selenium</strong> and <strong>pytest</strong> are utilized. The process starts once a pull request is submitted.</p>
<!-- ![CI process](docs/ci.png) -->
<h4 id="cdyml">CD.yml</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Continuous Delivery</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">: </span></span>
<span class="line"><span style="color:#85E89D">    push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        branches</span><span style="color:#E1E4E8">: [ </span><span style="color:#9ECBFF">"main"</span><span style="color:#E1E4E8"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    build_push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Push Image to Dockerhub</span></span>
<span class="line"><span style="color:#85E89D">        runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">        steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Checkout Repository</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v2</span></span>
<span class="line"><span style="color:#E1E4E8">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Login to Dockerhub</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/login-action/@v2</span></span>
<span class="line"><span style="color:#85E89D">              with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                username</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DOCKERHUB_USERNAME }}</span></span>
<span class="line"><span style="color:#85E89D">                password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DOCKERHUB_PASSWORD }}</span></span>
<span class="line"><span style="color:#E1E4E8">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Set Up Docker Buildx</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/setup-buildx-action/@v2</span></span>
<span class="line"><span style="color:#E1E4E8">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Push Xweeter API</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/build-push-action@v4</span></span>
<span class="line"><span style="color:#85E89D">              with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                context</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./server</span></span>
<span class="line"><span style="color:#85E89D">                file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./server/Dockerfile</span></span>
<span class="line"><span style="color:#85E89D">                push</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#85E89D">                tags</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DOCKERHUB_USERNAME }}/xweeter-api:${{ github.run_number }}</span></span>
<span class="line"><span style="color:#E1E4E8">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Push Xweeter</span></span>
<span class="line"><span style="color:#85E89D">              uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/build-push-action@v4</span></span>
<span class="line"><span style="color:#85E89D">              with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">                context</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./client</span></span>
<span class="line"><span style="color:#85E89D">                file</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./client/Dockerfile</span></span>
<span class="line"><span style="color:#85E89D">                push</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#85E89D">                tags</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.DOCKERHUB_USERNAME }}/xweeter:${{ github.run_number }}</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#85E89D">    deploy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy to Server</span></span>
<span class="line"><span style="color:#85E89D">        runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">self-hosted</span></span>
<span class="line"><span style="color:#85E89D">        needs</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">build_push</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">        steps</span><span style="color:#E1E4E8">:    </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Pull Newest Images</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker pull postgres:latest</span></span>
<span class="line"><span style="color:#9ECBFF">                docker pull ${{ secrets.DOCKERHUB_USERNAME }}/xweeter-api:${{ github.run_number }}</span></span>
<span class="line"><span style="color:#9ECBFF">                docker pull ${{ secrets.DOCKERHUB_USERNAME }}/xweeter:${{ github.run_number }}</span></span>
<span class="line"><span style="color:#9ECBFF">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Stop and Remove Existing Containers and Networks</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker stop $(docker ps -a -q) &#x26;&#x26; docker rm $(docker ps -a -q)</span></span>
<span class="line"><span style="color:#9ECBFF">                docker network prune -f</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Create Network and Volume</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker network create xweeter-network</span></span>
<span class="line"><span style="color:#9ECBFF">                docker volume create xweeter-api-volume</span></span>
<span class="line"><span style="color:#9ECBFF">                docker volume create xweeter-volume</span></span>
<span class="line"><span style="color:#9ECBFF">                </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Run Containers</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=${{ secrets.POSTGRES_PASSWORD }} -e POSTGRES_DB=x-db --network xweeter-network --name postgres-container postgres</span></span>
<span class="line"><span style="color:#9ECBFF">                sleep 5</span></span>
<span class="line"><span style="color:#9ECBFF">                docker run -d -p 5000:5000 -v xweeter-api-volume -e POSTGRES_PASSWORD=${{ secrets.POSTGRES_PASSWORD }} -e POSTGRES_DB=x-db -e POSTGRES_HOST=postgres-container --network xweeter-network --name xweeter-api-container ${{ secrets.DOCKERHUB_USERNAME }}/xweeter-api:${{ github.run_number }}</span></span>
<span class="line"><span style="color:#9ECBFF">                sleep 5</span></span>
<span class="line"><span style="color:#9ECBFF">                docker run -d -p 4173:4173 -v xweeter-volume --network xweeter-network --name xweeter-container ${{ secrets.DOCKERHUB_USERNAME }}/xweeter:${{ github.run_number }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Connect Backend with the Database</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker exec xweeter-api-container flask db init</span></span>
<span class="line"><span style="color:#9ECBFF">                docker exec xweeter-api-container flask db migrate</span></span>
<span class="line"><span style="color:#9ECBFF">                docker exec xweeter-api-container flask db upgrade</span></span>
<span class="line"><span style="color:#9ECBFF">            </span></span>
<span class="line"><span style="color:#E1E4E8">            - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Remove Unused Data</span></span>
<span class="line"><span style="color:#85E89D">              run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">                docker system prune -af</span></span>
<span class="line"></span></code></pre>
<p>In the CD process, there are two main tasks to accomplish:</p>
<ul>
<li>Building and pushing the images of the app to Docker Hub</li>
<li>Deploying the app to the server</li>
</ul>
<p>For the first task, the process runs inside an Ubuntu runner provided by GitHub, just like the CI process. Meanwhile, for the second task, the process runs inside a self-hosted runner, which is an Ubuntu virtual machine already connected to GitHub.</p>
<!-- ![self-hosted runner already connected to GitHub](docs/self-hosted-runner.png) -->
<p>The process starts once there is a push to the <code>main</code> branch.</p>
<!-- ![CD process](docs/cd.png) -->
<p>The app now can be accessed on the server.</p>
<!-- ![The app on the server](docs/deployed.png) -->
<h3 id="4-configuring-the-web-server">4. Configuring the web server</h3>
<p>In this step, we need to configure Nginx to act as a reverse proxy, redirecting requests from port 80 (HTTP) to the running app on the server.</p>
<h4 id="removing-the-default-configuration">Removing the default configuration</h4>
<p>First, we need to remove the default Nginx configuration.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> rm</span><span style="color:#9ECBFF"> /etc/nginx/sites-available/default</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> rm</span><span style="color:#9ECBFF"> /etc/nginx/sites-enabled/default</span></span>
<span class="line"></span></code></pre>
<h4 id="creating-new-configuration">Creating new configuration</h4>
<p>After ensuring that the default configuration has been removed, we can proceed to create a new configuration.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#79B8FF">cd</span><span style="color:#9ECBFF"> /etc/nginx/sites-available</span></span>
<span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> nano</span><span style="color:#9ECBFF"> xweeter</span></span>
<span class="line"></span></code></pre>
<p>Within the configuration file, we specify the port that Nginx will listen to and the destination port to which the request will be redirected.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="nginx"><code><span class="line"><span style="color:#F97583">server</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    listen </span><span style="color:#79B8FF">80</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    server_name </span><span style="color:#E1E4E8">_;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    location</span><span style="color:#B392F0"> / </span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#F97583">        proxy_pass </span><span style="color:#E1E4E8">http://localhost:4173;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    location</span><span style="color:#B392F0"> /api </span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#F97583">        proxy_pass </span><span style="color:#E1E4E8">http://localhost:5000;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Then, we enable the configuration by linking it to to <code>sites-enabled</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> ln</span><span style="color:#79B8FF"> -s</span><span style="color:#9ECBFF"> /etc/nginx/sites-available/xweeter</span><span style="color:#9ECBFF"> /etc/nginx/sites-enabled</span></span>
<span class="line"></span></code></pre>
<p>Before testing, we can confirm that there are no errors in the Nginx configuration.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> nginx</span><span style="color:#79B8FF"> -t</span></span>
<span class="line"></span></code></pre>
<p>If there are no errors, the app can now be accessed directly without the need to specify the port.</p>
<h3 id="5-creating-a-domain-name">5. Creating a domain name</h3>
<p>The final step is to create a domain name to make the server accessible without relying on the public IP. Additionally, we need to install an SSL certificate to ensure the connection is secure via HTTPS. In this project, I am using <a href="https://freedns.afraid.org/">FreeDNS</a> to create a domain name and <strong>Certbot</strong> to generate an SSL certificate.</p>
<h4 id="creating-a-domain-in-freedns">Creating a domain in FreeDNS</h4>
<!-- ![Domain in FreeDNS](docs/domain.png) -->
<p>Now we can access the app in the domain <a href="https://xweeter.strangled.net">xweeter.strangled.net</a></p>
<h4 id="installing-certbot">Installing Certbot</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> apt</span><span style="color:#9ECBFF"> install</span><span style="color:#9ECBFF"> certbot</span><span style="color:#9ECBFF"> python3-certbot-nginx</span></span>
<span class="line"></span></code></pre>
<h4 id="generating-an-ssl-certificate-using-certbot">Generating an SSL certificate using Certbot</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">sudo</span><span style="color:#9ECBFF"> certbot</span><span style="color:#79B8FF"> --nginx</span><span style="color:#79B8FF"> -d</span><span style="color:#9ECBFF"> "xweeter.strangled.net"</span></span>
<span class="line"></span></code></pre>
<p>After generating the SSL certificate, the connection is now secured with HTTPS.</p>
<!-- ![Web accessed via a domain name and connection already on HTTPS](docs/https.png) -->
<h2 id="conclusion">Conclusion</h2>
<p>This concludes the deployment process for a simple social media app. While there are still issues to address regarding the connection between the Vue and Flask apps, overall, the application has been successfully deployed to the server. It can now be accessed via a domain name with a secure HTTPS connection.</p> </article> </main>  <footer class="flex items-center justify-between w-screen px-16 py-4 text-xs border-t border-fuchsia-400 text-fuchsia-400"> <p>&copy; 2024. All rights reserved.</p> <span class="flex items-center gap-2"> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"></path></svg> <a href="mailto:mad4869@gmail.com" target="_blank" title="Reach via email" class="hover:underline">mad4869@gmail.com</a> </span> </footer>  </body> </html>